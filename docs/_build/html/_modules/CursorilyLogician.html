

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>CursorilyLogician &mdash; S0krates 5.0.0.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> S0krates
          

          
          </a>

          
            
            
              <div class="version">
                5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">How it works</a></li>
<li class="toctree-l1"><a class="reference internal" href="../textlinguistics.html">Textlinguistic tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic_annotations.html">bayessoassdsdsdsdskr</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">S0krates</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Module code</a> &raquo;</li>
        
      <li>CursorilyLogician</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for CursorilyLogician</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="kn">import</span> <span class="nn">itertools</span>
<span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="kn">import</span> <span class="nn">textwrap</span>
<span class="kn">from</span> <span class="nn">littletools.corutine_utils</span> <span class="k">import</span> <span class="n">coroutine</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">import</span> <span class="nn">matplotlib</span>

<span class="kn">from</span> <span class="nn">littletools.digraph_tools</span> <span class="k">import</span> <span class="n">neo4j2nx_mycel</span>
<span class="kn">from</span> <span class="nn">littletools.nested_list_tools</span> <span class="k">import</span> <span class="n">flatten_reduce</span>

<span class="n">matplotlib</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;TkAgg&#39;</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">contradictrix</span> <span class="k">import</span> <span class="n">Contradiction</span>
<span class="kn">from</span> <span class="nn">predicatrix2</span> <span class="k">import</span> <span class="n">Predication</span>
<span class="kn">from</span> <span class="nn">correlatrix</span> <span class="k">import</span> <span class="n">Correlation</span>
<span class="kn">from</span> <span class="nn">subj_and_aspectrix</span> <span class="k">import</span> <span class="n">Subjects_and_aspects</span>

<span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">NullHandler</span><span class="p">())</span>

<span class="kn">import</span> <span class="nn">py2neo</span>

<div class="viewcode-block" id="DataframeCursorilyLogician"><a class="viewcode-back" href="../CursorilyLogician.html#CursorilyLogician.DataframeCursorilyLogician">[docs]</a><span class="k">class</span> <span class="nc">DataframeCursorilyLogician</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39; This module handles all the databases for the operations on the text and does some transactions in between.</span>

<span class="sd">        * a DataFrame in the corpus, representing the grammatical information read from the input files, one</span>
<span class="sd">        line per word.</span>
<span class="sd">        * a DataFrame with all the predicative substructures of the sentences</span>
<span class="sd">        * a DataFrame with the actual sentences in it.</span>
<span class="sd">        and</span>
<span class="sd">        * a GraphDatabase (neo4j) for storing the results of the operations on the text as well as for querying for</span>
<span class="sd">        certain connections of such superficial rhetorical relations in the text</span>

<span class="sd">    &#39;&#39;&#39;</span>
<div class="viewcode-block" id="DataframeCursorilyLogician.__init__"><a class="viewcode-back" href="../CursorilyLogician.html#CursorilyLogician.DataframeCursorilyLogician.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">corpus</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Set up all the textsuntactical models and the graph database</span>

<span class="sd">            :param corpus: corpus instance with loaded conlls</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cleanup_debug_img</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">corpus</span> <span class="o">=</span> <span class="n">corpus</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sentence_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">corpus</span><span class="o">.</span><span class="n">sentence_df</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Predicatrix</span>    <span class="o">=</span> <span class="n">Predication</span><span class="p">(</span><span class="n">corpus</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Contradictrix</span>  <span class="o">=</span> <span class="n">Contradiction</span> <span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Correlatrix</span>    <span class="o">=</span> <span class="n">Correlation</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Subj_Aspectrix</span> <span class="o">=</span> <span class="n">Subjects_and_aspects</span><span class="p">(</span><span class="n">corpus</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span> <span class="o">=</span> <span class="n">py2neo</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="s2">&quot;bolt://localhost:7687&quot;</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;s0krates&quot;</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;MATCH (n) OPTIONAL MATCH (n)-[r]-() DELETE n,r&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;CREATE INDEX ON :Nlp(s_id, i_s)&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="DataframeCursorilyLogician.annotate_horizon"><a class="viewcode-back" href="../CursorilyLogician.html#CursorilyLogician.DataframeCursorilyLogician.annotate_horizon">[docs]</a>    <span class="k">def</span> <span class="nf">annotate_horizon</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">horizon</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; writes in a column &#39;horizon&#39; a list of ids of the following n sentences</span>

<span class="sd">        :param horizon: nomber of sentences to look forward</span>
<span class="sd">        :return: None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">def</span> <span class="nf">horizon_from_row</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sentence_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="p">:</span><span class="n">x</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="n">horizon</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sentence_df</span><span class="p">[</span><span class="s1">&#39;horizon&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sentence_df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
                                                   <span class="n">horizon_from_row</span><span class="p">,</span>
                                                   <span class="n">result_type</span><span class="o">=</span><span class="s2">&quot;reduce&quot;</span><span class="p">,</span>
                                                   <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></div>


<div class="viewcode-block" id="DataframeCursorilyLogician.collect_predicates_from_rows"><a class="viewcode-back" href="../CursorilyLogician.html#CursorilyLogician.DataframeCursorilyLogician.collect_predicates_from_rows">[docs]</a>    <span class="k">def</span> <span class="nf">collect_predicates_from_rows</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sentence_df_row</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Collect predicates from the df in the horizon and put them in the row of the predicate</span>

<span class="sd">        :param sentence_df_row: df with &#39;horizon&#39;</span>
<span class="sd">        :return: the predicates in the horizon</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">sentence_df_row</span><span class="p">[</span><span class="s1">&#39;horizon&#39;</span><span class="p">]:</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sentence_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">sentence_df_row</span><span class="p">[</span><span class="s1">&#39;horizon&#39;</span><span class="p">]][</span><span class="s1">&#39;predication&#39;</span><span class="p">])))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="DataframeCursorilyLogician.annotate_predicates"><a class="viewcode-back" href="../CursorilyLogician.html#CursorilyLogician.DataframeCursorilyLogician.annotate_predicates">[docs]</a>    <span class="k">def</span> <span class="nf">annotate_predicates</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Call the function to annotate the predicates for each sentence and puts them into a column &#39;predication&#39;</span>

<span class="sd">            :return: None</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sentence_df</span><span class="p">[</span><span class="s1">&#39;predication&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sentence_df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
                                                   <span class="bp">self</span><span class="o">.</span><span class="n">Predicatrix</span><span class="o">.</span><span class="n">analyse_predications</span><span class="p">,</span>
                                                   <span class="n">result_type</span><span class="o">=</span><span class="s2">&quot;reduce&quot;</span><span class="p">,</span>
                                                   <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sentence_df</span><span class="p">[</span><span class="s1">&#39;predications_in_range&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sentence_df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
                                                   <span class="bp">self</span><span class="o">.</span><span class="n">collect_predicates_from_rows</span><span class="p">,</span>
                                                   <span class="n">result_type</span><span class="o">=</span><span class="s2">&quot;reduce&quot;</span><span class="p">,</span>
                                                   <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataframeCursorilyLogician.get_predicates_in_horizon"><a class="viewcode-back" href="../CursorilyLogician.html#CursorilyLogician.DataframeCursorilyLogician.get_predicates_in_horizon">[docs]</a>    <span class="k">def</span> <span class="nf">get_predicates_in_horizon</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s_id</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Collects the predicates, that are in the annotatet range, befor and after the sentence, where to look for</span>
<span class="sd">            intresting expressions</span>

<span class="sd">            :param s_id: id of the sentence</span>
<span class="sd">            :return: list of super-predicates, means they all have the property of having &#39;part_predications&#39; under it</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sentence_df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;s_id==@s_id&#39;</span><span class="p">)[</span><span class="s1">&#39;predications_in_range&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>


<div class="viewcode-block" id="DataframeCursorilyLogician.get_predication"><a class="viewcode-back" href="../CursorilyLogician.html#CursorilyLogician.DataframeCursorilyLogician.get_predication">[docs]</a>    <span class="k">def</span> <span class="nf">get_predication</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Finds the predicate dict, that a special id belongs to by looking it up in the DataFrame in the Predication-</span>
<span class="sd">            module.</span>

<span class="sd">            :param id: id of that predicate</span>
<span class="sd">            :return: predicate-dict</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
                <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Predicatrix</span><span class="o">.</span><span class="n">predicate_df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;id==@id&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s1">&#39;records&#39;</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">get_part_predication</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pred</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Collect all particular predications in that sentence. It also looks, if there were more blocks of predicates</span>
<span class="sd">            found.</span>

<span class="sd">            :param s_id: id of the sentense</span>
<span class="sd">            :return: list of predicate dicts.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">pp</span>
                <span class="k">for</span> <span class="n">pred_in_s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sentence_df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;s_id==@s_id&#39;</span><span class="p">)[</span><span class="s1">&#39;predication&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pred_in_s</span>
                <span class="k">for</span> <span class="n">pp</span> <span class="ow">in</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;part_predications&#39;</span><span class="p">]]</span>


<div class="viewcode-block" id="DataframeCursorilyLogician.get_part_predication"><a class="viewcode-back" href="../CursorilyLogician.html#CursorilyLogician.DataframeCursorilyLogician.get_part_predication">[docs]</a>    <span class="k">def</span> <span class="nf">get_part_predication</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s_id</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Collect all particular predications in that sentence. It also looks, if there were more blocks of predicates</span>
<span class="sd">            found.</span>

<span class="sd">            :param s_id: id of the sentense</span>
<span class="sd">            :return: list of predicate dicts.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">pp</span>
                <span class="k">for</span> <span class="n">pred_in_s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sentence_df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;s_id==@s_id&#39;</span><span class="p">)[</span><span class="s1">&#39;predication&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pred_in_s</span>
                <span class="k">for</span> <span class="n">pp</span> <span class="ow">in</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;part_predications&#39;</span><span class="p">]]</span></div>


<div class="viewcode-block" id="DataframeCursorilyLogician.get_marked_predication"><a class="viewcode-back" href="../CursorilyLogician.html#CursorilyLogician.DataframeCursorilyLogician.get_marked_predication">[docs]</a>    <span class="k">def</span> <span class="nf">get_marked_predication</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s_id</span><span class="p">,</span> <span class="n">horizon</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Collect all predicates, that have a certain marker in them.</span>

<span class="sd">            It&#39;s  usefull, if you want to look for sentences with certain phrases like &#39;for example&#39;, &#39;in contrast&#39;,</span>
<span class="sd">            &#39;except&#39;. I searches for the the string, that makes the mark.</span>

<span class="sd">            :param s_id: id of the sentense</span>
<span class="sd">            :param horizon: how many sentences to look forward</span>
<span class="sd">            :return: list of predicate dicts.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">horizon</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">s_id</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">s_id</span><span class="p">)</span> <span class="o">+</span> <span class="n">horizon</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">markers_pos</span> <span class="o">=</span> <span class="s1">&#39;thus_ADV&#39;</span>
        <span class="n">markers_text</span> <span class="o">=</span> <span class="s1">&#39;for instance&#39;</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sentence_df</span><span class="p">[</span><span class="s1">&#39;s_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">horizon</span><span class="p">)</span> <span class="o">&amp;</span>
            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sentence_df</span><span class="p">[</span><span class="s1">&#39;text_pos_&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">markers_pos</span><span class="p">,</span> <span class="n">case</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">|</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sentence_df</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">markers_text</span><span class="p">,</span> <span class="n">case</span><span class="o">=</span><span class="kc">False</span><span class="p">)))</span>


        <span class="n">predicates</span> <span class="o">=</span>  <span class="n">flatten_reduce</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sentence_df</span><span class="p">[</span><span class="n">mask</span><span class="p">][</span><span class="s1">&#39;predication&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">predicates</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">predicates</span></div>



<div class="viewcode-block" id="DataframeCursorilyLogician.annotate_contradictions"><a class="viewcode-back" href="../CursorilyLogician.html#CursorilyLogician.DataframeCursorilyLogician.annotate_contradictions">[docs]</a>    <span class="k">def</span> <span class="nf">annotate_contradictions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Looks first for pairs of phrases with negations and antonyms in an horizon</span>
<span class="sd">            and second it evaluates the similarity of these phrases, what would be the fitting counterpart for that one</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">put_contradiction_into_gdb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">put_into_gdb</span><span class="p">(</span><span class="s2">&quot;connotation&quot;</span><span class="p">,</span> <span class="s2">&quot;contradiction&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sentence_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Contradictrix</span><span class="o">.</span><span class="n">find_contradictive</span><span class="p">(</span>
                <span class="n">x</span><span class="p">[</span><span class="s1">&#39;predication&#39;</span><span class="p">],</span>
                <span class="n">x</span><span class="p">[</span><span class="s1">&#39;predications_in_range&#39;</span><span class="p">],</span>
                <span class="n">graph_coro</span><span class="o">=</span><span class="n">put_contradiction_into_gdb</span><span class="p">)</span></div>


<div class="viewcode-block" id="DataframeCursorilyLogician.get_correllation_preds"><a class="viewcode-back" href="../CursorilyLogician.html#CursorilyLogician.DataframeCursorilyLogician.get_correllation_preds">[docs]</a>    <span class="k">def</span> <span class="nf">get_correllation_preds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pred</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;  Collect the predicates, that can be modifyers to the predicate.</span>

<span class="sd">            These are either in the same sentence or the coreferenced predicates or in the sentence after</span>

<span class="sd">            :param pred: the predicate</span>
<span class="sd">            :return: list of predicate_tuples</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">pred</span> <span class="o">==</span> <span class="p">[]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span> <span class="p">(</span><span class="s1">&#39;got empty predicate&#39;</span><span class="p">)</span>
        <span class="n">pred</span> <span class="o">=</span> <span class="n">pred</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">s_id</span> <span class="o">=</span> <span class="n">pred</span><span class="p">[</span><span class="s1">&#39;s_id&#39;</span><span class="p">]</span>
        <span class="n">predicates_in_sentence</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_part_predication</span><span class="p">(</span><span class="n">s_id</span><span class="p">)</span>        <span class="c1"># predicates from same sentence</span>
        <span class="n">coref_preds</span>            <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_coreferenced_preds</span> <span class="p">(</span><span class="n">pred</span><span class="p">)</span>     <span class="c1"># predicates that are coreferencing/-ed</span>
        <span class="n">marked_preds</span>           <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_marked_predication</span> <span class="p">(</span><span class="n">s_id</span><span class="p">)</span>     <span class="c1"># predicates with examples or meaning explanations (&#39;e.g.&#39;, &#39;by saying that I mean&#39;)</span>
        <span class="k">return</span> <span class="n">predicates_in_sentence</span> <span class="o">+</span> <span class="n">coref_preds</span> <span class="o">+</span> <span class="n">marked_preds</span></div>


<div class="viewcode-block" id="DataframeCursorilyLogician.get_addressed_coref"><a class="viewcode-back" href="../CursorilyLogician.html#CursorilyLogician.DataframeCursorilyLogician.get_addressed_coref">[docs]</a>    <span class="k">def</span> <span class="nf">get_addressed_coref</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coref</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Analyses a coref mention and looks it up in the Database for predications.</span>

<span class="sd">            :param coref: dict  with sentence id, start and end of the mention</span>
<span class="sd">            :return: a list of coreferenced predicates</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">s_id</span>  <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">coref</span><span class="p">[</span><span class="s1">&#39;s_id&#39;</span><span class="p">])</span>
        <span class="n">i_list</span> <span class="o">=</span> <span class="n">coref</span><span class="p">[</span><span class="s1">&#39;i_list&#39;</span><span class="p">]</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Predicatrix</span><span class="o">.</span><span class="n">predicate_df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;s_id==@s_id&quot;</span><span class="p">)[</span><span class="s1">&#39;i_s&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">ex_i</span><span class="p">:</span> <span class="kc">True</span> <span class="k">if</span> <span class="p">[</span><span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">i_list</span> <span class="k">if</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">ex_i</span><span class="p">]</span> <span class="k">else</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">mask</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Predicatrix</span><span class="o">.</span><span class="n">predicate_df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;s_id==@s_id&quot;</span><span class="p">)[</span><span class="n">mask</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s1">&#39;records&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="DataframeCursorilyLogician.get_coreferenced_preds"><a class="viewcode-back" href="../CursorilyLogician.html#CursorilyLogician.DataframeCursorilyLogician.get_coreferenced_preds">[docs]</a>    <span class="k">def</span> <span class="nf">get_coreferenced_preds</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pred</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Get the predicates, that are coreferenced by the coreference tags of another preducate.</span>

<span class="sd">            :param pred: predication tuple</span>
<span class="sd">            :return: list oft predicate dicts or [] if not found</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">pred</span><span class="p">[</span><span class="s1">&#39;coref&#39;</span><span class="p">]):</span>
            <span class="n">corefs_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pred</span><span class="p">[</span><span class="s1">&#39;coref&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="n">x</span><span class="p">]</span>
            <span class="n">preds</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">corefs</span> <span class="ow">in</span> <span class="n">corefs_list</span> <span class="k">for</span> <span class="n">coref</span> <span class="ow">in</span> <span class="n">corefs</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_addressed_coref</span><span class="p">(</span><span class="n">coref</span><span class="p">)]</span>
            <span class="k">return</span> <span class="n">preds</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span></div>


<div class="viewcode-block" id="DataframeCursorilyLogician.annotate_correlations"><a class="viewcode-back" href="../CursorilyLogician.html#CursorilyLogician.DataframeCursorilyLogician.annotate_correlations">[docs]</a>    <span class="k">def</span> <span class="nf">annotate_correlations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Look for pairs of hypotactical and paratactical and anaphorical expressions with similar semantics and</span>
<span class="sd">            modalities</span>

<span class="sd">            That means expressions, that both talk about examples or that both give reasons or are a modifyer to the</span>
<span class="sd">            seemingly contradictions, that are found.</span>

<span class="sd">            These routines reclassify some of the contradictions, because also talking about examples can seem to be</span>
<span class="sd">            anithetical, if the explanation of the instanciated concept is repeated.</span>

<span class="sd">            :return: None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c1"># Lookup what contradicitons were found</span>
        <span class="n">contradictions</span>           <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_from_gdb</span><span class="p">(</span><span class="s1">&#39;contradiction&#39;</span><span class="p">))</span>

        <span class="c1"># Coroutine for writing the simmix ressults into the gdb</span>
        <span class="n">put_correlation_into_gdb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">put_into_gdb</span><span class="p">(</span><span class="s2">&quot;Connotation&quot;</span><span class="p">,</span> <span class="s2">&quot;correlation&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">contra1</span><span class="p">,</span> <span class="n">contra2</span> <span class="ow">in</span> <span class="n">contradictions</span><span class="p">:</span>
            <span class="n">poss_correl_l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_correllation_preds</span><span class="p">(</span><span class="n">contra1</span><span class="p">)</span>
            <span class="n">poss_correl_r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_correllation_preds</span><span class="p">(</span><span class="n">contra2</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">Correlatrix</span><span class="o">.</span><span class="n">annotate_correlations</span><span class="p">(</span>
                <span class="n">contradiction</span><span class="o">=</span> <span class="p">(</span><span class="n">contra1</span><span class="p">,</span> <span class="n">contra2</span><span class="p">),</span>
                <span class="n">possible_to_correlate</span><span class="o">=</span><span class="p">(</span><span class="n">poss_correl_l</span><span class="p">,</span> <span class="n">poss_correl_r</span><span class="p">),</span>
                <span class="n">graph_coro</span><span class="o">=</span><span class="n">put_correlation_into_gdb</span><span class="p">)</span></div>


<div class="viewcode-block" id="DataframeCursorilyLogician.get_opposed_constellation_gdb"><a class="viewcode-back" href="../CursorilyLogician.html#CursorilyLogician.DataframeCursorilyLogician.get_opposed_constellation_gdb">[docs]</a>    <span class="k">def</span> <span class="nf">get_opposed_constellation_gdb</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns the pattern, that gave a contradiction-opposition-pair</span>

<span class="sd">            :return: 2tuple-2tuple-list-predicate-dict</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">query</span> <span class="o">=</span> \
            <span class="sd">&quot;&quot;&quot;MATCH (pred1)-[:CORRELATION {SpecialKind:&#39;correlated&#39;}]-(pred3),</span>
<span class="sd">      (pred1)-[:CORRELATION {SpecialKind:&#39;opposed&#39;}]-(pred2),</span>
<span class="sd">      (pred2)-[:CORRELATION {SpecialKind:&#39;correlated&#39;}]-(pred4),</span>
<span class="sd">      (pred3)-[:CORRELATION {SpecialKind:&#39;opposed&#39;}]-(pred4)      </span>
<span class="sd">RETURN pred1, pred2, pred3, pred4&quot;&quot;&quot;</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;query neo4j for reading by this:</span><span class="se">\n</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">query</span><span class="p">)</span>
        <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">query</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>
        <span class="n">records</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(((</span><span class="bp">self</span><span class="o">.</span><span class="n">get_predication</span><span class="p">(</span><span class="n">tuple4</span><span class="p">[</span><span class="s1">&#39;pred1&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]),</span>
               <span class="bp">self</span><span class="o">.</span><span class="n">get_predication</span><span class="p">(</span><span class="n">tuple4</span><span class="p">[</span><span class="s1">&#39;pred2&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">])),</span>
              <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_predication</span><span class="p">(</span><span class="n">tuple4</span><span class="p">[</span><span class="s1">&#39;pred3&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]),</span>
               <span class="bp">self</span><span class="o">.</span><span class="n">get_predication</span><span class="p">(</span><span class="n">tuple4</span><span class="p">[</span><span class="s1">&#39;pred4&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]))))</span>
            <span class="k">for</span> <span class="n">tuple4</span> <span class="ow">in</span> <span class="n">records</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">records</span></div>


<div class="viewcode-block" id="DataframeCursorilyLogician.annotate_subjects_and_aspects"><a class="viewcode-back" href="../CursorilyLogician.html#CursorilyLogician.DataframeCursorilyLogician.annotate_subjects_and_aspects">[docs]</a>    <span class="k">def</span> <span class="nf">annotate_subjects_and_aspects</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Look for some common arguments of the contradicting and correlating predications.</span>
<span class="sd">            These may may they be the logical subjects, the pre&quot;&quot;&quot;</span>

<span class="sd">            :return: None</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c1"># Say, after annotation of the contradictions and their correlating modifyers we have a pair of &#39;opposed&#39;</span>
        <span class="c1"># nodes, as annotated by the correlatrix.</span>
        <span class="n">opposed_pair_pairs</span>   <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_opposed_constellation_gdb</span><span class="p">()</span>

        <span class="n">put_arg_into_gdb</span>     <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">put_into_gdb</span><span class="p">(</span><span class="s1">&#39;denotation&#39;</span><span class="p">,</span> <span class="s1">&#39;argument&#39;</span><span class="p">)</span>
        <span class="n">put_deno_into_gdb</span>    <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">put_into_gdb</span><span class="p">(</span><span class="s1">&#39;denotation&#39;</span><span class="p">,</span> <span class="s1">&#39;subjects_aspects&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">oppo</span> <span class="ow">in</span> <span class="n">opposed_pair_pairs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Subj_Aspectrix</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
                <span class="n">opposed_pair_pair</span>   <span class="o">=</span> <span class="n">oppo</span><span class="p">,</span>
                <span class="n">graph_coro_subj_asp</span><span class="o">=</span> <span class="n">put_arg_into_gdb</span><span class="p">,</span>
                <span class="n">graph_coro_arg_binding</span><span class="o">=</span><span class="n">put_deno_into_gdb</span>
                <span class="p">)</span></div>

    <span class="sd">&#39;&#39;&#39; Colors for the final graph&#39;&#39;&#39;</span>
    <span class="n">kind_color_map</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;subject&#39;</span>           <span class="p">:</span> <span class="s1">&#39;#5B6C5D&#39;</span><span class="p">,</span>
            <span class="s1">&#39;aspect&#39;</span><span class="p">:</span> <span class="s1">&#39;#5B6C5D&#39;</span><span class="p">,</span>

            <span class="s1">&#39;predicate&#39;</span>         <span class="p">:</span> <span class="s1">&#39;#9FFFF5&#39;</span><span class="p">,</span>
            <span class="s1">&#39;example&#39;</span>           <span class="p">:</span> <span class="s1">&#39;#59C9A5&#39;</span><span class="p">,</span>
            <span class="s1">&#39;explanation&#39;</span>       <span class="p">:</span> <span class="s1">&#39;#56E39F&#39;</span><span class="p">,</span>
            <span class="s1">&#39;differential_layer&#39;</span><span class="p">:</span> <span class="s1">&#39;crimson&#39;</span><span class="p">,</span>
            <span class="s1">&#39;correl&#39;</span>            <span class="p">:</span> <span class="s1">&#39;#465775&#39;</span><span class="p">,</span>
            <span class="s1">&#39;center&#39;</span>            <span class="p">:</span> <span class="s1">&#39;#ECFEE8&#39;</span><span class="p">,</span>
            <span class="s1">&#39;contra&#39;</span>            <span class="p">:</span> <span class="s1">&#39;#EF6F6C&#39;</span>
        <span class="p">}</span>

    <span class="sd">&#39;&#39;&#39;Edge labels for the final graph&#39;&#39;&#39;</span>
    <span class="n">edge_label_map</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;exclusive&#39;</span>         <span class="p">:</span> <span class="s1">&#39;side of distinction&#39;</span><span class="p">,</span>
            <span class="s1">&#39;aspect&#39;</span><span class="p">:</span> <span class="s1">&#39;aspect&#39;</span><span class="p">,</span>

            <span class="s1">&#39;subject&#39;</span>           <span class="p">:</span> <span class="s1">&#39;subject&#39;</span><span class="p">,</span>
            <span class="s1">&#39;aspects&#39;</span><span class="p">:</span> <span class="s1">&#39;aspects&#39;</span><span class="p">,</span>
            <span class="s1">&#39;subjects&#39;</span><span class="p">:</span> <span class="s1">&#39;subjects&#39;</span><span class="p">,</span>
            <span class="s1">&#39;opposed&#39;</span><span class="p">:</span><span class="s1">&#39;contrast&#39;</span><span class="p">,</span>

            <span class="s1">&#39;predicate&#39;</span>         <span class="p">:</span> <span class="s1">&#39;sentence&#39;</span><span class="p">,</span>
            <span class="s1">&#39;example&#39;</span>           <span class="p">:</span> <span class="s1">&#39;example&#39;</span><span class="p">,</span>
            <span class="s1">&#39;explanation&#39;</span>       <span class="p">:</span> <span class="s1">&#39;explanation&#39;</span><span class="p">,</span>
            <span class="s1">&#39;differential_layer&#39;</span><span class="p">:</span> <span class="s1">&#39;aspect&#39;</span><span class="p">,</span>
            <span class="s1">&#39;correlated&#39;</span>        <span class="p">:</span> <span class="s1">&#39;correlation&#39;</span><span class="p">,</span>
            <span class="s1">&#39;center&#39;</span>            <span class="p">:</span> <span class="s2">&quot;distinction&quot;</span><span class="p">,</span>
            <span class="s1">&#39;contra&#39;</span>            <span class="p">:</span> <span class="s1">&#39;contrast&#39;</span><span class="p">,</span>
            <span class="s1">&#39;computed&#39;</span>          <span class="p">:</span> <span class="s1">&#39;compared with&#39;</span><span class="p">,</span>
            <span class="s1">&#39;abc&#39;</span>                <span class="p">:</span> <span class="s1">&#39;?&#39;</span>
        <span class="p">}</span>


<div class="viewcode-block" id="DataframeCursorilyLogician.draw"><a class="viewcode-back" href="../CursorilyLogician.html#CursorilyLogician.DataframeCursorilyLogician.draw">[docs]</a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">G</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Make a nice materialized graph from the distinction query</span>

<span class="sd">            :param G: nx.Multidigraph</span>
<span class="sd">            :param path: Where to put the file</span>
<span class="sd">            :return: None</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">path</span> <span class="o">+</span> <span class="s1">&#39;distinction.svg&#39;</span>

        <span class="kn">import</span> <span class="nn">pylab</span> <span class="k">as</span> <span class="nn">pylab</span>
        <span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">plt</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">set_size_inches</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">wrap</span> <span class="p">(</span><span class="n">strs</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">strs</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>

        <span class="c1">#wrapped_node_labels = {n: {&#39;label&#39;:wrap(d)} for n, d in G.nodes(data=&#39;text&#39;) if d}</span>
        <span class="n">wrapped_node_labels</span> <span class="o">=</span> <span class="p">{</span><span class="n">n</span><span class="p">:</span> <span class="n">wrap</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">d</span><span class="p">}</span>

        <span class="n">edge_labels</span> <span class="o">=</span> <span class="p">{(</span><span class="n">u</span><span class="p">,</span><span class="n">v</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span> <span class="p">{</span><span class="s1">&#39;xlabel&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge_label_map</span><span class="p">[</span><span class="n">d</span><span class="p">]}</span> <span class="k">for</span> <span class="n">u</span><span class="p">,</span><span class="n">v</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;SpecialKind&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;what?&#39;</span><span class="p">)}</span>
        <span class="n">node_colors</span> <span class="o">=</span>  <span class="p">{</span><span class="n">n</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;style&#39;</span><span class="p">:</span><span class="s1">&#39;filled&#39;</span><span class="p">,</span> <span class="s1">&#39;fillcolor&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">kind_color_map</span><span class="p">[</span><span class="n">d</span><span class="p">]}</span> <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;SpecialKind&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">d</span><span class="p">}</span>

        <span class="n">nx</span><span class="o">.</span><span class="n">set_edge_attributes</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">edge_labels</span><span class="p">)</span>
        <span class="c1">#nx.set_node_attributes(G, wrapped_node_labels)</span>
        <span class="n">nx</span><span class="o">.</span><span class="n">set_node_attributes</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">node_colors</span><span class="p">)</span>

        <span class="n">G</span><span class="o">.</span><span class="n">graph</span><span class="p">[</span><span class="s1">&#39;graph&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;rankdir&#39;</span><span class="p">:</span> <span class="s1">&#39;LR&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;style&#39;</span><span class="p">:</span> <span class="s1">&#39;filled&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;splines&#39;</span><span class="p">:</span><span class="s1">&#39;curved&#39;</span><span class="p">}</span>
        <span class="n">kamada_kawai</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">drawing</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">kamada_kawai_layout</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>

        <span class="c1">#spectral = nx.spectral_layout(G)</span>
        <span class="n">spring</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">spring_layout</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
        <span class="c1">#dot_layout = graphviz_layout(G, prog=&#39;dot&#39;)</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="n">kamada_kawai</span>

        <span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;node_color&#39;</span><span class="p">:</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span>
            <span class="s1">&#39;node_size&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
            <span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s1">&#39;arrowstyle&#39;</span><span class="p">:</span> <span class="s1">&#39;-|&gt;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;arrowsize&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx</span><span class="p">(</span><span class="n">G</span><span class="p">,</span>
                         <span class="n">pos</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span>
                         <span class="n">labels</span><span class="o">=</span><span class="n">wrapped_node_labels</span><span class="p">,</span>
                         <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">font_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                         <span class="o">**</span><span class="n">options</span><span class="p">)</span>
        <span class="c1">#nx.draw_networkx_edge_labels(G, pos, edge_labels=edge_labels, rotate=False)</span>

        <span class="c1">#plt.title(&quot;\n&quot;.join([wrap(x, 90) for x in [title, wff_nice, wff_ugly]]), pad=20)</span>
        <span class="c1">#pylab.axis(&#39;off&#39;)</span>
        <span class="n">pylab</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
        <span class="n">pylab</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span></div>
        <span class="c1">#A = nx.drawing.nx_agraph.to_agraph(G)</span>
        <span class="c1">#A.layout(&#39;dot&#39;)</span>
        <span class="c1">#A.draw(path = &quot;found_distinction.svg&quot;)</span>


<div class="viewcode-block" id="DataframeCursorilyLogician.add_determined_expression"><a class="viewcode-back" href="../CursorilyLogician.html#CursorilyLogician.DataframeCursorilyLogician.add_determined_expression">[docs]</a>    <span class="k">def</span> <span class="nf">add_determined_expression</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">general_kind</span><span class="p">,</span> <span class="n">special_kind</span><span class="p">,</span> <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Throws node data into neo4j by expanding data as dictionary.</span>

<span class="sd">            :param general_kind: some string property of all members, that are added by this function</span>
<span class="sd">            :param special_kind: some string property of all members, that is special for the new members each</span>
<span class="sd">            :param n1: predicate dict 1</span>
<span class="sd">            :param n2: predicate dict</span>
<span class="sd">            :return: None</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">query</span> <span class="o">=</span> \
<span class="sa">r</span><span class="sd">&quot;&quot;&quot;            MERGE (a:Nlp {{s_id:{s_id1}, text:&#39;{text1}&#39;, i_s:{i_s1}}}) </span>
<span class="sd">                ON CREATE SET a.label=&#39;{label}&#39;, a.id={id1}</span>
<span class="sd">                ON MATCH SET a.id=a.id+[{id1}]   </span>
<span class="sd">                MERGE (b:Nlp {{s_id:{s_id2}, text:&#39;{text2}&#39;, i_s:{i_s2}}}) </span>
<span class="sd">                ON CREATE SET b.label=&#39;{label}&#39;, b.id={id2}</span>
<span class="sd">                ON MATCH SET b.id=b.id+[{id2}]</span>
<span class="sd">                MERGE (a)-[:{special_kind_u} {{SpecialKind:&#39;{special_kind}&#39;}}]-(b)</span>
<span class="sd">                MERGE (a)-[:{general_kind} {{SpecialKind:&#39;{special_kind}&#39;}}]-(b)&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span>
                <span class="n">general_kind</span><span class="o">=</span><span class="n">general_kind</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span>
                <span class="n">special_kind</span><span class="o">=</span><span class="n">special_kind</span><span class="p">,</span>
                <span class="n">special_kind_u</span><span class="o">=</span><span class="n">special_kind</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span>

                <span class="n">id1</span><span class="o">=</span><span class="n">n1</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>      <span class="n">s_id1</span><span class="o">=</span><span class="n">n1</span><span class="p">[</span><span class="s1">&#39;s_id&#39;</span><span class="p">],</span>       <span class="n">i_s1</span><span class="o">=</span><span class="n">n1</span><span class="p">[</span><span class="s1">&#39;i_s&#39;</span><span class="p">],</span>      <span class="n">text1</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">n1</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="n">id2</span><span class="o">=</span><span class="n">n2</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>      <span class="n">s_id2</span><span class="o">=</span><span class="n">n2</span><span class="p">[</span><span class="s1">&#39;s_id&#39;</span><span class="p">],</span>       <span class="n">i_s2</span><span class="o">=</span><span class="n">n2</span><span class="p">[</span><span class="s1">&#39;i_s&#39;</span><span class="p">],</span>      <span class="n">text2</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">n2</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span> <span class="p">(</span><span class="s2">&quot;querying neo4j the following:</span><span class="se">\n</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">query</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">query</span><span class="p">)</span></div>


    <span class="nd">@coroutine</span>
    <span class="k">def</span> <span class="nf">put_into_gdb</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">general_kind</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; This returns a subgraph of the graph, selected by the &#39;general_kind&#39; param.</span>

<span class="sd">            :param general_kind: some string property of all members, that are added by this function</span>
<span class="sd">            :return: list of Predicate-dict-2tuples</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="k">yield</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">special_kind</span> <span class="o">=</span>  <span class="n">data</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_determined_expression</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">general_kind</span><span class="p">,</span> <span class="n">special_kind</span><span class="p">,</span> <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Value could not be set because I don</span><span class="se">\&#39;</span><span class="s1">t know how to deal with the type&#39;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Value could not be set because I don</span><span class="se">\&#39;</span><span class="s1">t know how to deal with the type&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>


<div class="viewcode-block" id="DataframeCursorilyLogician.get_from_gdb"><a class="viewcode-back" href="../CursorilyLogician.html#CursorilyLogician.DataframeCursorilyLogician.get_from_gdb">[docs]</a>    <span class="k">def</span> <span class="nf">get_from_gdb</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kind</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns pairs of in certain way connected nodes from neo4j</span>

<span class="sd">            :param kind: this certain kind of connection; its a property of the graph edges</span>
<span class="sd">            :return: tuples of contradicting predicates</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">r</span><span class="sd">&quot;&quot;&quot;MATCH path = (a)-[:%s]-&gt;(b) </span>
<span class="sd">                WHERE ID(a) &lt; ID(b)</span>
<span class="sd">                RETURN a,b &quot;&quot;&quot;</span> <span class="o">%</span> <span class="n">kind</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;query neo4j:</span><span class="se">\n</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">query</span><span class="p">)</span>
        <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">query</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>
        
        <span class="n">records</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_predication</span><span class="p">(</span><span class="n">pair</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]),</span>
             <span class="bp">self</span><span class="o">.</span><span class="n">get_predication</span><span class="p">(</span><span class="n">pair</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]))</span>
            <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">records</span>
        <span class="p">]</span>
        <span class="k">assert</span> <span class="nb">all</span> <span class="p">(</span><span class="n">records</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">all</span> <span class="p">(</span><span class="nb">all</span> <span class="p">(</span><span class="n">pair</span><span class="p">)</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">records</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">records</span></div>

<div class="viewcode-block" id="DataframeCursorilyLogician.move_labels"><a class="viewcode-back" href="../CursorilyLogician.html#CursorilyLogician.DataframeCursorilyLogician.move_labels">[docs]</a>    <span class="k">def</span> <span class="nf">move_labels</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Calls a neo4j apoc function to give labels to the node from a property named &#39;label&#39;</span>

<span class="sd">            :return: None</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;MATCH (n:Nlp)</span>
<span class="s2">CALL apoc.create.addLabels( id(n), [ n.label ] ) YIELD node</span>
<span class="s2">RETURN node&quot;&quot;&quot;</span></div>


<div class="viewcode-block" id="DataframeCursorilyLogician.query_distinctions"><a class="viewcode-back" href="../CursorilyLogician.html#CursorilyLogician.DataframeCursorilyLogician.query_distinctions">[docs]</a>    <span class="k">def</span> <span class="nf">query_distinctions</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Makes the query for the distinctions in neo4j.</span>

<span class="sd">            It looks for at least two constrasting, correlated pairs of predicates with the same subjects and the same</span>
<span class="sd">            aspects</span>

<span class="sd">            :return: None</span>
<span class="sd">            Match (a:DISTINGUISH8), (b:DISTINGUISH8)</span>
<span class="sd">            Where a.first = b.second or a.second = b.first</span>
<span class="sd">            Merge (a)-[:KNIT]-(b)</span>
<span class="sd">            return a,b</span>


<span class="sd">            MATCH (n1)--(n2)</span>
<span class="sd">            WHERE n1.s_id = n2.s_id and all(x IN n1.i_s WHERE x IN n2.i_s)</span>
<span class="sd">            return n2,n1</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">query</span> <span class="o">=</span> \
            <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">MATCH</span>
<span class="sd">(pred3)-[r1{SpecialKind:&#39;correlated&#39;}]-(pred1),</span>
<span class="sd">(pred2)-[r2{SpecialKind:&#39;correlated&#39;}]-(pred4),</span>
<span class="sd">(pred4)-[r3{SpecialKind:&#39;opposed&#39;}]-(pred3), </span>
<span class="sd">(pred1)-[r0{SpecialKind:&#39;opposed&#39;}]-(pred2),</span>

<span class="sd">(pred1)-[r4{SpecialKind:&#39;subject&#39;}]-(arg1), </span>
<span class="sd">(pred2)-[r5{SpecialKind:&#39;subject&#39;}]-(arg2),</span>
<span class="sd">(pred3)-[r6{SpecialKind:&#39;aspect&#39;}]-(arg3), </span>
<span class="sd">(pred4)-[r7{SpecialKind:&#39;aspect&#39;}]-(arg4),</span>
<span class="sd">(arg1)-[r8{SpecialKind:&#39;subjects&#39;}]-(arg2),</span>
<span class="sd">(arg3)-[r9{SpecialKind:&#39;aspects&#39;}]-(arg4)</span>
<span class="sd">//MERGE (pred1)-[r10:KN]-(d:DISTINGUISH8 {first:[ID(arg1), ID(pred1), ID(pred3), ID(arg3)], second:[ID(arg2), ID(pred2), ID(pred4), ID(arg4)]})-[:KN]-(pred2)</span>
<span class="sd">SET </span>
<span class="sd">pred1.d = True, pred2.d=True, pred3.d = True, pred4.d=True, </span>
<span class="sd">arg1.d = True, arg2.d=True, arg3.d=True, arg4.d=True, </span>
<span class="sd">r1.d=True, r2.d=True, r4.d=True, r5.d=True, r6.d=True, r7.d=True, r8.d=True, r9.d=True</span>
<span class="sd">RETURN arg1, arg2, pred1, pred2, pred3, pred4, arg3, arg4</span>
<span class="sd">&quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span> <span class="p">(</span><span class="s2">&quot;query neo4j for distinctions&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">distinction_df</span> <span class="o">=</span>  <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">query</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">())</span><span class="o">.</span><span class="n">applymap</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">G</span> <span class="o">=</span> <span class="n">neo4j2nx_mycel</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="n">subgraph_marker</span><span class="o">=</span><span class="s1">&#39;d&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">G</span><span class="p">,</span><span class="s1">&#39;img/&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">distinction_df</span></div>


<div class="viewcode-block" id="DataframeCursorilyLogician.cleanup_debug_img"><a class="viewcode-back" href="../CursorilyLogician.html#CursorilyLogician.DataframeCursorilyLogician.cleanup_debug_img">[docs]</a>    <span class="k">def</span> <span class="nf">cleanup_debug_img</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Deletes the content of the &#39;./img&#39; folder, that only new pictures are there.</span>
<span class="sd">        These pictures are usefull for debugging.</span>

<span class="sd">            :return: None</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="kn">import</span> <span class="nn">os</span>
        <span class="n">folder</span> <span class="o">=</span> <span class="s1">&#39;./img&#39;</span>
        <span class="k">for</span> <span class="n">the_file</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
            <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">the_file</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
                <span class="c1"># elif os.path.isdir(file_path): shutil.rmtree(file_path)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Stefan Werner

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>